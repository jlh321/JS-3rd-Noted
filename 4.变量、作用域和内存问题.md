# 4.1 基本类型和引用类型

**基本类型**： undefined、null、string、number、boolean、symbo（ES6）

**普通基本类型**： undefined、null、symbol（ES6）

**特殊基本包装类型**：string、number、boolean

**引用类型**：Object、Array、RegExp、Date、Function

**区别**：引用类型值可添加属性和方法，而基本类型值则不可以

**基本类型**： 基本类型的变量是存放在**栈内存**（Stack）里，占据固定大小的空间 ，一个变量向另一个变量复制基本类型的值时，会创建这个值的一个副本

**引用类型**： 引用类型的值是保存在**堆内存（Heap）**中的**对象（Object）**，包含引用类型的对象实际上包含是一个指向该对象的指针。一个变量向另一个变量复制**引用类型**的值，复制的**指针**，两个指针指向**同一个对象**

```javascript
var obj1 = new Object();

var obj2 = obj1;

obj1.name = "Nicholas";

alert(obj2.name) ; // "Nicholas"
```

**只能对引用类型值动态添加属性** 

```javascript
var person = new Object();

person.name = "Tom";

alert(person.name);    //"Tom"
```

```javascript
var name = "Tom";

name.age = 27;

alert(name.age);  //undefined
```

**typeof**操作符查询**基本类型**，**instanceof**操作符查询**引用类型**

```js
var a = "Nicholas";
var b = "true";
var c = 22;
var d = null;
var o = new Object();
alert(typeof a);   //string
alert(typeof b);   //boolean
alert(typeof c);   //number
alert(typeof d);   //object
alert(typeof o);   //object
```

```js
alert(person instanceof Object);  
alert(colors instanceof Array); 
alert(pattern instanceof RegExp);
```

所有引用类型的值都是Object的实例，检测一个引用类型和Object构造函数时，操作符始终返回true。检测基本类型时会返回false

**传递参数**

基本类型和引用类型都是按**值**传递的

# 4.2 执行环境及作用域

**执行环境**（execution context）是当前代码被解析和执行时所在的环境的抽象概念，也叫执行上下文。

在web浏览器中，全局执行环境为**windows对象**，再node.js中指向这个文件的module对象

所有全局变量和属性都是做为windows对象的属性和方法创建的， 某个执行环境所有代码被**执行完毕**后，该环境和保存在其中所有的变量和函数定义也被被毁。

**执行栈**，当执行流进入一个函数时，就会把函数的环境推入到一个环境栈中。在函数执行后，栈将其环境弹出，控制权返回给之前的执行环境。

**执行环境**分为两个阶段创建：

1. **创建阶段**
2. **执行阶段**

代码在一个环境中执行时，会创建变量对象的一个作用域链（scope chain）,作用域链的**前端**是当前执行的代码所在环境的**变量对象**。在**函数**环境中，其**活动对象**（activation object）为**变量对象**，最开始只包含一个变量，即arguments对象。